name: Test code

on: push

jobs:
  one-host-default-port-no-port-forward:
    runs-on: ubuntu-latest

    container:
      image:  kroniak/ssh-client:latest

    services:
      host-1:
        image: linuxserver/openssh-server
        #ports:
        #- 22:2222
        #options: --entrypoint redis-server
        env:
          USER_NAME: test
          USER_PASSWORD: test

    steps:
    - uses: actions/checkout@v1

    - run: ping host-1

    - run: ssh -p 2222 -T test:test@host-1
    #  working-directory: ./redis

    #- run: node client.js
    #  working-directory: ./redis
    #  env:
    #    REDIS_HOST: redis
    #    REDIS_PORT: ${{ job.services.redis.ports[6379] }}
